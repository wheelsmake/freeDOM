(()=>{"use strict";function e(e){var t="";for(let n=0;n<e;n++){let e=Math.floor(52*Math.random());t+=e>25?String.fromCharCode(e+71):String.fromCharCode(e+65)}return t}function t(e,t){return-1===t.indexOf(e)?null:t.splice(t.indexOf(e),1)}function n(e,t,n,r){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${r?`, reason: ${r}`:""}${n?`, got ${n}`:""}.`)}function r(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function o(e){return e instanceof Text?"Text":e instanceof Element&&"Element"}function i(e){return"object"==typeof e&&"id"in e&&"text"in e&&"instance"in e&&3==Object.keys(e).length}function l(e,t,n){e.setAttribute(t,n)}function s(e,t){e.appendChild(f(t))}function a(e,t,r,o,i,l){return"string"!=typeof t&&n("tagName","string",t),null!==r&&"[object Object]"!=r.toString()&&n("attrs","SSkvObject",r),null!==o&&"[object Object]"!=o.toString()&&n("events","eventRecord",o),null===i||i instanceof Array||n("children","childrenArray",i),null===l||l instanceof Element||n("instance","Element",l),{id:e,tagName:t.toLocaleLowerCase(),attrs:r,events:o,children:i,instance:l}}function c(e,t,r){if(null===r||r instanceof Text||n("instance","Text",r),"string"==typeof t)return{id:e,text:t,instance:r};n("text","string | null",t)}function u(t){const r=o(t),i=e(15);if("Text"==r){const e=t,n=function(e){const t=e.textContent,n=t.replace(/\n\s*/g,""),r=e.parentElement;return"TEXTAREA"==r.tagName||r instanceof HTMLElement&&r.isContentEditable?t:""===n?(e.remove(),null):n!==t?(e.textContent=t.replace(/\n\s*/g," "),e.textContent):t}(e);if(null!==n)return c(i,n,e)}else{if("Element"==r){const e=t,r=a(i,e.tagName,function(e){const t=o(e);"Text"!=t&&!1!==t||n("element","Element",e,"only Element have attributes");const r=e.attributes;var i={};for(let n=0;n<r.length;n++)i[r[n].name]=r[n].textContent;return 0===Object.keys(i).length?null:i}(e),function(e){if(E.has(e)){const t=E.get(e),n={};for(let e in t){n[e]=[];for(let r=0;r<t[e].length;r++)n[e][r]=t[e][r]}return n}return null}(e),function(e){const t=Array.from(e.childNodes);var n=[];for(let r=0;r<t.length;r++){const e=t[r];if(null===e)continue;const i=o(e);if("Element"==i)n.push(u(e));else if("Text"==i){const t=u(e);t!==undefined&&n.push(t)}}return n}(e),e);return r}n("node","instance",t)}}function f(e){if("object"==typeof(t=e)&&"id"in t&&"tagName"in t&&"attrs"in t&&"events"in t&&"children"in t&&"instance"in t&&6==Object.keys(t).length){const t=document.createElement(e.tagName);return function(e,t){const n=t.attrs;for(let r in n)l(e,r,n[r])}(t,e),function(e,t){if(null!==t.children){const n=t.children;for(let t=0;t<n.length;t++)s(e,n[t])}}(t,e),t}return i(e)?document.createTextNode(e.text):(n("vDOM","vDOM",e),new Element);var t}var d,h,p,m,g,v,y=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},w=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const b=[],E=new Map,x=Element.prototype,j=x;j.oddEventListener=x.addEventListener,x.addEventListener=new Proxy(j.oddEventListener,{apply(e,n,r){const[o,i,l,s]=r,a=E.get(n),c=l!==undefined&&("boolean"==typeof l?l:l.capture||!1);var u;if(u="object"==typeof l&&!0===l.once?new Proxy(i,{apply(e,r,i){const l=E.get(n)[o];for(let n=0;n<l.length;n++){const e=l[n].arg1,r=e!==undefined&&("boolean"==typeof e?e:e.capture||!1);l[n].handler===u&&r===c&&t(l[n],l)}return Reflect.apply(e,r,i)}}):i,a!==undefined){if(a[o]===undefined)a[o]=[{handler:u,arg1:l,arg2:s}],r[1]=u;else{var f=!1;for(let e=0;e<a[o].length;e++){const t=a[o][e].arg1,n=t!==undefined&&("boolean"==typeof t?t:t.capture||!1);if(i===a[o][e].handler&&c===n){f=!0;break}}f||(a[o].push({handler:u,arg1:l,arg2:s}),r[1]=u)}E.set(n,a)}else E.set(n,{[o]:[{handler:u,arg1:l,arg2:s}]}),r[1]=u;return Reflect.apply(e,n,r)}}),j.oemoveEventListener=x.removeEventListener,x.removeEventListener=new Proxy(j.oemoveEventListener,{apply(e,n,r){const[o,i,l]=r;if(E.has(n)){const e=E.get(n),r=l!==undefined&&("boolean"==typeof l?l:l.capture||!1);if(e[o]!==undefined)for(let n=0;n<e[o].length;n++){const l=e[o][n].arg1,s=l!==undefined&&("boolean"==typeof l?l:l.capture||!1);i===e[o][n].handler&&r===s&&t(e[o][n],e[o])}E.set(n,e)}return Reflect.apply(e,n,r)}});class N{constructor(e,t){d.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,[[],[],[]]),v.set(this,[[],[],[]]),e=function(e){if(e instanceof Element)return e;if("string"==typeof e){const t=r(e);if(t instanceof Node)return t;n("rootNode","string | Element",e,"rootNode should be a VALID #id selector")}else n("rootNode","string | Element",e,"rootNode should be a #id selector or an Element");return new Element}(e),y(this,d,e,"f");const o=u(e);if(i(o)||null===o)throw n("rootNode","Elementy",e,"rootNode should be an Element or a #id selector"),new Error;y(this,m,o,"f"),y(this,p,w(this,m,"f"),"f"),y(this,h,t,"f"),b.push(this)}get rootNode(){return w(this,d,"f")}get options(){return w(this,h,"f")}get vDOM(){return w(this,m,"f")}m(e,t,n){const r=w(this,m,"f");if(e!==r.id)for(let o=0;o<r.children.length;o++);else r.children.splice(t,0,n)}mount(e,t,n){return this.m(e,t,n)}u(){}unmount(){return this.u()}s(){}sync(){return this.s()}r(){}rsync(){return this.r()}}d=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap;const O={"new":(e,t)=>new N(e,t),get instances(){return[...b]},get eventStore(){return new Map(E)},c:(t,n,r)=>a(e(15),t,n||null,null,r||[],null),createVElement:(t,n,r)=>a(e(15),t,n||null,null,r||[],null),h:(t,n,r)=>a(e(15),t,n||null,null,r||[],null),t:t=>c(e(15),t,null)||null,createVText:t=>c(e(15),t,null)||null,p:e=>u(e)||null,parseNode:e=>u(e)||null,b:e=>f(e),buildNode:e=>f(e),d(){},diff(){},e:(e,t)=>r(e,t)};!function M(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&M(e[Object.keys(e)[t]])}(O);const T=O;Object.defineProperty(window,"FreeDOM",{configurable:!1,writable:!1,enumerable:!0,value:T})})();
//# sourceMappingURL=freedom.min.js.map