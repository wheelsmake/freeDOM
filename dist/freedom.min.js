(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e){var t="";for(let n=0;n<e;n++){let e=Math.floor(52*Math.random());t+=e>25?String.fromCharCode(e+71):String.fromCharCode(e+65)}return t}function n(e,t){return-1===t.indexOf(e)?null:t.splice(t.indexOf(e),1)}function r(e,t,n,r){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${r?`, reason: ${r}`:""}${n?`, got ${n}`:""}.`)}function o(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function l(e){return e instanceof Text?"Text":e instanceof Element&&"Element"}function i(e){return"object"==typeof e&&"id"in e&&"text"in e&&"instance"in e&&3==Object.keys(e).length}function a(e){return"object"==typeof e&&"id"in e&&"tagName"in e&&"attrs"in e&&"events"in e&&"children"in e&&"instance"in e&&6==Object.keys(e).length}function s(e,t,n){e.setAttribute(t,n)}function c(e,t){e.appendChild(h(t))}function u(e,n,o,l,i){return"string"!=typeof e&&r("tagName","string",e),null!==n&&"[object Object]"!=n.toString()&&r("attrs","SSkvObject",n),null!==o&&"[object Object]"!=o.toString()&&r("events","eventRecord",o),null===l||l instanceof Array||r("children","childrenArray",l),null===i||i instanceof Element||r("instance","Element",i),{id:t(15),tagName:e.toLocaleLowerCase(),attrs:n,events:o,children:l,instance:i}}function f(e,n){return null===n||n instanceof Text||r("instance","Text",n),"string"==typeof e?{id:t(15),text:e,instance:n}:(null===e||r("text","string | null",e),null)}function d(e){const t=l(e);if("Text"==t){const t=e;return f(function(e){const t=e.textContent,n=t.replace(/\n\s*/g,""),r=e.parentElement;return"TEXTAREA"==r.tagName||r instanceof HTMLElement&&r.isContentEditable?t:""===n?(e.remove(),null):n!==t?(e.textContent=t.replace(/\n\s*/g," "),e.textContent):t}(t),t)}if("Element"==t){const t=e;return u(t.tagName,function(e){const t=l(e);"Text"!=t&&!1!==t||r("element","Element",e,"only Element have attributes");const n=e.attributes;var o={};for(let r=0;r<n.length;r++)o[n[r].name]=n[r].textContent;return 0===Object.keys(o).length?null:o}(t),function(e){return E.has(e)?E.get(e):null}(t),function(e){const t=Array.from(e.childNodes);var n=[];for(let r=0;r<t.length;r++){const e=t[r];if(null===e)continue;const o=l(e);if("Element"==o)n.push(d(e));else if("Text"==o){const t=d(e);null!==t&&n.push(t)}}return 0==n.length?null:n}(t),t)}return r("node","instance",e),null}function h(e){if(a(e)){const t=document.createElement(e.tagName);return function(e,t){const n=t.attrs;for(let r in n)s(e,r,n[r])}(t,e),function(e,t){if(null!==t.children){const n=t.children;for(let t=0;t<n.length;t++)c(e,n[t])}}(t,e),t}return i(e)?document.createTextNode(e.text):(r("vDOM","vDOM",e),new Element)}function p(e){if(e.instance=null,a(e)&&null!==e.children)for(let t=0;t<e.children.length;t++);return e}e.d({},{d8:()=>E});var g,m,y,v=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},b=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const w=[],E=new Map,x=Element.prototype,j=x;j.oddEventListener=x.addEventListener,x.addEventListener=new Proxy(j.oddEventListener,{apply(e,t,r){const[o,l,i,a]=r,s=E.get(t),c=i!==undefined&&("boolean"==typeof i?i:i.capture||!1);var u;if(u="object"==typeof i&&!0===i.once?new Proxy(l,{apply(e,r,l){const i=E.get(t)[o];for(let t=0;t<i.length;t++){const e=i[t].arg1,r=e!==undefined&&("boolean"==typeof e?e:e.capture||!1);i[t].handler===u&&r===c&&n(i[t],i)}return Reflect.apply(e,r,l)}}):l,s!==undefined){if(s[o]===undefined)s[o]=[{handler:u,arg1:i,arg2:a}],r[1]=u;else{var f=!1;for(let e=0;e<s[o].length;e++){const t=s[o][e].arg1,n=t!==undefined&&("boolean"==typeof t?t:t.capture||!1);if(l===s[o][e].handler&&c===n){f=!0;break}}f||(s[o].push({handler:u,arg1:i,arg2:a}),r[1]=u)}E.set(t,s)}else E.set(t,{[o]:[{handler:u,arg1:i,arg2:a}]}),r[1]=u;return Reflect.apply(e,t,r)}}),j.oemoveEventListener=x.removeEventListener,x.removeEventListener=new Proxy(j.oemoveEventListener,{apply(e,t,r){const[o,l,i]=r;if(E.has(t)){const e=E.get(t),r=i!==undefined&&("boolean"==typeof i?i:i.capture||!1);if(e[o]!==undefined)for(let t=0;t<e[o].length;t++){const i=e[o][t].arg1,a=i!==undefined&&("boolean"==typeof i?i:i.capture||!1);l===e[o][t].handler&&r===a&&n(e[o][t],e[o])}E.set(t,e)}return Reflect.apply(e,t,r)}});new MutationObserver((function(e){})).observe(document,{subtree:!0,childList:!0});class O{constructor(e,t){g.set(this,void 0),m.set(this,void 0),y.set(this,void 0),e=function(e){if(e instanceof Element)return e;if("string"==typeof e){const t=o(e);if(t instanceof Node)return t}else r("rootNode","string | Element",e,"rootNode should be a #id selector or an Element");return new Element}(e),v(this,g,e,"f");const n=d(e);i(n)||null===n?r("rootNode","Elementy",e,"rootNode should be an Element or a #id selector"):v(this,y,n,"f"),v(this,m,t,"f"),w.push(this)}get rootNode(){return b(this,g,"f")}get options(){return b(this,m,"f")}get vDOM(){return b(this,y,"f")}m(){}mount(){}u(){}unmount(){}s(){}sync(){}r(){}rsync(){}}g=new WeakMap,m=new WeakMap,y=new WeakMap;const T={"new":(e,t)=>new O(e,t),get instances(){return[...w]},get eventStore(){return new Map(E)},c:(e,t,n)=>u(e,t||null,null,n||null,null),createVElement:(e,t,n)=>u(e,t||null,null,n||null,null),h:(e,t,n)=>u(e,t||null,null,n||null,null),t:e=>(null===e&&r("text","string",e),f(e,null)),createVText:e=>(null===e&&r("text","string",e),f(e,null)),p:e=>d(e),parseNode:e=>d(e),b:e=>h(e),buildNode:e=>h(e),u:e=>p(e),unlink:e=>p(e),e:(e,t)=>o(e,t)};!function N(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&N(e[Object.keys(e)[t]])}(T);Object.defineProperty(window,"FreeDOM",{configurable:!1,writable:!1,enumerable:!0,value:T})})();
//# sourceMappingURL=freedom.min.js.map