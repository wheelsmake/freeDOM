(()=>{"use strict";function e(e){var t="";for(let n=0;n<e;n++){let e=Math.floor(52*Math.random());t+=e>25?String.fromCharCode(e+71):String.fromCharCode(e+65)}return t}function t(e,t){return-1===t.indexOf(e)?null:t.splice(t.indexOf(e),1)}function n(e,t,n,r){throw e===undefined?new Error("An error occured."):new Error(`Argument '${e}' ${t?`should be a(an) ${t}`:"is invalid"}${r?`, reason: ${r}`:""}${n?`, got ${n}`:""}.`)}function r(e,t){t!==undefined&&t instanceof Element||(t=document);let n=t.querySelectorAll(e);return n.length?1==n.length&&e.match(/^.*#[^\s]*$/)?n[0]:Array.from(n):[]}function o(e){return e instanceof Text?"Text":e instanceof Element&&"Element"}function l(e){return"object"==typeof e&&"id"in e&&"text"in e&&"instance"in e&&3==Object.keys(e).length}function i(e,t,n){e.setAttribute(t,n)}function a(e,t){e.appendChild(f(t))}function s(t,r,o,l,i){return"string"!=typeof t&&n("tagName","string",t),null!==r&&"[object Object]"!=r.toString()&&n("attrs","SSkvObject",r),null!==o&&"[object Object]"!=o.toString()&&n("events","eventRecord",o),null===l||l instanceof Array||n("children","childrenArray",l),null===i||i instanceof Element||n("instance","Element",i),{id:e(15),tagName:t.toLocaleLowerCase(),attrs:r,events:o,children:l,instance:i}}function c(t,r){return null===r||r instanceof Text||n("instance","Text",r),"string"==typeof t?{id:e(15),text:t,instance:r}:(null===t||n("text","string | null",t),null)}function u(e){const t=o(e);if("Text"==t){const t=e;return c(function(e){const t=e.textContent,n=t.replace(/\n\s*/g,""),r=e.parentElement;return"TEXTAREA"==r.tagName||r instanceof HTMLElement&&r.isContentEditable?t:""===n?(e.remove(),null):n!==t?(e.textContent=t.replace(/\n\s*/g," "),e.textContent):t}(t),t)}if("Element"==t){const t=e;return s(t.tagName,function(e){const t=o(e);"Text"!=t&&!1!==t||n("element","Element",e,"only Element have attributes");const r=e.attributes;var l={};for(let n=0;n<r.length;n++)l[r[n].name]=r[n].textContent;return 0===Object.keys(l).length?null:l}(t),function(e){if(x.has(e)){const t=x.get(e),n={};for(let e in t){n[e]=[];for(let r=0;r<t[e].length;r++){n[e][r]={};for(let o in t[e][r])n[e][r][o]=t[e][r][o]}}return n}return null}(t),function(e){const t=Array.from(e.childNodes);var n=[];for(let r=0;r<t.length;r++){const e=t[r];if(null===e)continue;const l=o(e);if("Element"==l)n.push(u(e));else if("Text"==l){const t=u(e);null!==t&&n.push(t)}}return 0==n.length?null:n}(t),t)}return n("node","instance",e),null}function f(e){if("object"==typeof(t=e)&&"id"in t&&"tagName"in t&&"attrs"in t&&"events"in t&&"children"in t&&"instance"in t&&6==Object.keys(t).length){const t=document.createElement(e.tagName);return function(e,t){const n=t.attrs;for(let r in n)i(e,r,n[r])}(t,e),function(e,t){if(null!==t.children){const n=t.children;for(let t=0;t<n.length;t++)a(e,n[t])}}(t,e),t}return l(e)?document.createTextNode(e.text):(n("vDOM","vDOM",e),new Element);var t}var d,h,p,g,m,v,b,y=undefined&&undefined.__classPrivateFieldSet||function(e,t,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(e,n):o?o.value=n:t.set(e,n),n},w=undefined&&undefined.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const E=[],x=new Map,O=Element.prototype,j=O;j.oddEventListener=O.addEventListener,O.addEventListener=new Proxy(j.oddEventListener,{apply(e,n,r){const[o,l,i,a]=r,s=x.get(n),c=i!==undefined&&("boolean"==typeof i?i:i.capture||!1);var u;if(u="object"==typeof i&&!0===i.once?new Proxy(l,{apply(e,r,l){const i=x.get(n)[o];for(let n=0;n<i.length;n++){const e=i[n].arg1,r=e!==undefined&&("boolean"==typeof e?e:e.capture||!1);i[n].handler===u&&r===c&&t(i[n],i)}return Reflect.apply(e,r,l)}}):l,s!==undefined){if(s[o]===undefined)s[o]=[{handler:u,arg1:i,arg2:a}],r[1]=u;else{var f=!1;for(let e=0;e<s[o].length;e++){const t=s[o][e].arg1,n=t!==undefined&&("boolean"==typeof t?t:t.capture||!1);if(l===s[o][e].handler&&c===n){f=!0;break}}f||(s[o].push({handler:u,arg1:i,arg2:a}),r[1]=u)}x.set(n,s)}else x.set(n,{[o]:[{handler:u,arg1:i,arg2:a}]}),r[1]=u;return Reflect.apply(e,n,r)}}),j.oemoveEventListener=O.removeEventListener,O.removeEventListener=new Proxy(j.oemoveEventListener,{apply(e,n,r){const[o,l,i]=r;if(x.has(n)){const e=x.get(n),r=i!==undefined&&("boolean"==typeof i?i:i.capture||!1);if(e[o]!==undefined)for(let n=0;n<e[o].length;n++){const i=e[o][n].arg1,a=i!==undefined&&("boolean"==typeof i?i:i.capture||!1);l===e[o][n].handler&&r===a&&t(e[o][n],e[o])}x.set(n,e)}return Reflect.apply(e,n,r)}});class T{constructor(e,t){d.add(this),h.set(this,void 0),p.set(this,void 0),g.set(this,void 0),m.set(this,void 0),v.set(this,[[],[],[]]),e=function(e){if(e instanceof Element)return e;if("string"==typeof e){const t=r(e);if(t instanceof Node)return t}else n("rootNode","string | Element",e,"rootNode should be a #id selector or an Element");return new Element}(e),y(this,h,e,"f");const o=u(e);l(o)||null===o?n("rootNode","Elementy",e,"rootNode should be an Element or a #id selector"):y(this,g,o,"f"),y(this,p,t,"f"),y(this,m,new MutationObserver(w(this,d,"m",b)),"f"),w(this,m,"f").observe(w(this,h,"f"),{childList:!0,subtree:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0}),E.push(this)}get rootNode(){return w(this,h,"f")}get options(){return w(this,p,"f")}get vDOM(){return w(this,g,"f")}m(){}mount(){}u(){}unmount(){}s(){}sync(){}r(){}rsync(){}}h=new WeakMap,p=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,d=new WeakSet,b=function(e){for(let t=0;t<e.length;t++);};const N={"new":(e,t)=>new T(e,t),get instances(){return[...E]},get eventStore(){return new Map(x)},c:(e,t,n)=>s(e,t||null,null,n||null,null),createVElement:(e,t,n)=>s(e,t||null,null,n||null,null),h:(e,t,n)=>s(e,t||null,null,n||null,null),t:e=>(null===e&&n("text","string",e),c(e,null)),createVText:e=>(null===e&&n("text","string",e),c(e,null)),p:e=>u(e),parseNode:e=>u(e),b:e=>f(e),buildNode:e=>f(e),d(){},diff(){},e:(e,t)=>r(e,t)};!function k(e){Object.freeze(e);for(let t=0;t<Object.keys(e).length;t++)"object"==typeof e[Object.keys(e)[t]]&&k(e[Object.keys(e)[t]])}(N);const M=N;Object.defineProperty(window,"FreeDOM",{configurable:!1,writable:!1,enumerable:!0,value:M})})();
//# sourceMappingURL=freedom.min.js.map