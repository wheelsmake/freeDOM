{"version":3,"file":"freedom.min.js","mappings":"mBAIA,QACU,CACFA,aAAaC,EAAsBC,GAC/B,KAAyB,QAAnBD,EAAQE,SAEV,IADAF,EAAUA,EAAQG,cACHF,EAAQ,OAAO,EAElC,OAAO,GAEXG,EAAEC,EAAWC,GACNA,IAAUC,WAAeD,aAAiBE,cAAcF,EAAQG,UACnE,IAAIC,EAAcJ,EAAMK,iBAAiBN,GACzC,OAAIK,EAAEE,OAES,GAAZF,EAAEE,QAAeP,EAAEQ,MAAM,eAAuBH,EAAE,GACzCI,MAAMC,KAAKL,GAHF,IAKzBM,aAAahB,GACT,OAAOiB,KAAKlB,aAAaC,EAAUiB,KAAKb,EAAE,QAAmB,KAEjEc,WAAU,CAACC,EAAUC,KACU,IAAxBA,EAAMC,QAAQF,GAAoB,KAC9BC,EAAME,OAAOF,EAAMC,QAAQF,GAAM,GAG5CI,YAAYC,GACRC,OAAOC,OAAOF,GACd,IAAI,IAAIG,EAAI,EAAGA,EAAIF,OAAOG,KAAKJ,GAAKZ,OAAQe,IAA2C,iBAA5BH,EAAIC,OAAOG,KAAKJ,GAAKG,KAAiBV,KAAKM,YAAYC,EAAIC,OAAOG,KAAKJ,GAAKG,O,6VCpBnJ,MAAME,EAAN,cACI,WAAsB,IACtBC,MAAIC,GAEA,IAAIC,EAAMhB,aAAae,EAAK/B,SAExB,OAAO,EAEX,IAAI,IAAI2B,EAAI,EAAGA,EAAI,EAAAV,KAAI,OAASL,OAAQe,IAAK,GAAGK,EAAMjC,aAAagC,EAAK/B,QAAS,EAAAiB,KAAI,OAASU,GAAG3B,UAAY+B,EAAK/B,UAAY,EAAAiB,KAAI,OAASU,GAAG3B,QAE1I,OAAO,EAGX,IAAI,IAAI2B,EAAI,EAAGA,EAAI,EAAAV,KAAI,OAASL,OAAQe,IAAQK,EAAMjC,aAAa,EAAAkB,KAAI,OAASU,GAAG3B,QAAS+B,EAAK/B,UAAUgC,EAAMd,WAAW,EAAAD,KAAI,OAASU,GAAG3B,QAAS,EAAAiB,KAAI,QAKzJ,OAJA,EAAAA,KAAI,OAASgB,KAAK,CACdjC,QAAS+B,EAAK/B,QACdkC,GAAIH,EAAKG,MAEN,G,cAGfF,EAAMT,YAAYM,GACjBM,OAAeN,QAAUA,G","sources":["webpack:///./src/utils.ts","webpack:///./src/freedom.ts"],"sourcesContent":["/* freeDOM\r\n * ©2022 LJM12914. https://github.com/openink/freeDOM\r\n * Licensed under MIT License. https://github.com/openink/freeDOM/blob/main/LICENSE\r\n*/\r\nexport default (()=>{\r\n    return{\r\n        isDescendant(element :HTMLElement, target :HTMLElement) :boolean{\r\n            while(element.tagName != \"HTML\"){\r\n                element = element.parentNode! as HTMLElement;\r\n                if(element === target) return true; \r\n            }\r\n            return false;\r\n        },\r\n        e(s :string, scope? :HTMLElement | Document) :Node[] | Node{\r\n            if(scope === undefined || !(scope instanceof HTMLElement)) scope = document;\r\n            let a :NodeList = scope.querySelectorAll(s);\r\n            if(!a.length) return [];\r\n            //note:当一个页面存在相同ID元素时不会走这里，而会返回数组，因为说好了是querySelectorAll了并且本来就不应该有重复ID，不能怪我啊\r\n            if(a.length == 1 && s.match(/^.*#[^\\s]*$/)) return a[0];\r\n            else return Array.from(a);\r\n        },\r\n        isInDocument(element :HTMLElement) :boolean{\r\n            return this.isDescendant(element, (this.e(\"html\") as Node[])[0] as HTMLElement);\r\n        },\r\n        precisePop(ele :any, array :any[]) :any[] | null{\r\n            if(array.indexOf(ele) === -1) return null;\r\n            return array.splice(array.indexOf(ele), 1);\r\n        },\r\n        //递归冻结对象\r\n        constantize(obj :anyObject) :void{\r\n            Object.freeze(obj);\r\n            for(let i = 0; i < Object.keys(obj).length; i++) if(typeof obj[Object.keys(obj)[i]] == \"object\") this.constantize(obj[Object.keys(obj)[i]]);\r\n        }\r\n    }\r\n})();","/* freeDOM\r\n * ©2022 LJM12914. https://github.com/openink/freeDOM\r\n * Licensed under MIT License. https://github.com/openink/freeDOM/blob/main/LICENSE\r\n*/\r\nimport tagNames from \"./tagNames\";\r\nimport utils from \"./utils\";\r\ninterface _newArgs{\r\n    element :HTMLElement;\r\n    id :string;\r\n    \r\n}\r\nclass FreeDOM{\r\n    #scopes :DOMScope[] = [];\r\n    new(args :_newArgs) :boolean{\r\n        //排除已经是目前作用域或目前作用域子元素的新增\r\n        if(!utils.isInDocument(args.element)){\r\n            console.warn(`${args.element} is not in document.`);\r\n            return false;\r\n        }\r\n        for(let i = 0; i < this.#scopes.length; i++) if(utils.isDescendant(args.element, this.#scopes[i].element) || args.element === this.#scopes[i].element){\r\n            console.warn(`${args.element} is already a descendant of an exist scope, thus freeDOM won't add it.`);\r\n            return false;\r\n        }\r\n        //排除原数组中是新增作用域子元素的元素\r\n        for(let i = 0; i < this.#scopes.length; i++) if(utils.isDescendant(this.#scopes[i].element, args.element)) utils.precisePop(this.#scopes[i].element, this.#scopes);\r\n        this.#scopes.push({\r\n            element: args.element,\r\n            id: args.id\r\n        });\r\n        return true;\r\n    }\r\n}\r\nutils.constantize(FreeDOM);\r\n(window as any).FreeDOM = FreeDOM;"],"names":["isDescendant","element","target","tagName","parentNode","e","s","scope","undefined","HTMLElement","document","a","querySelectorAll","length","match","Array","from","isInDocument","this","precisePop","ele","array","indexOf","splice","constantize","obj","Object","freeze","i","keys","FreeDOM","new","args","utils","push","id","window"],"sourceRoot":""}